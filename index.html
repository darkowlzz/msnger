<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>msnger by darkowlzz</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>msnger</h1>
        <h2>Easy to setup messaging server.</h2>

        <section id="downloads">
          <a href="https://github.com/darkowlzz/msnger/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/darkowlzz/msnger/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/darkowlzz/msnger" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a id="msnger" class="anchor" href="#msnger" aria-hidden="true"><span class="octicon octicon-link"></span></a>msnger</h1>

<p><a href="https://nodei.co/npm/msnger/"><img src="https://nodei.co/npm/msnger.png" alt="NPM"></a></p>

<p>Setup messaging server with ease.</p>

<h2>
<a id="to-use" class="anchor" href="#to-use" aria-hidden="true"><span class="octicon octicon-link"></span></a>To use</h2>

<ol>
<li>
<p>Install it:</p>

<div class="highlight highlight-bash"><pre>$ npm i msnger</pre></div>
</li>
<li>
<p>Import it and use:</p>

<div class="highlight highlight-js"><pre><span class="pl-k">var</span> msnger <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>msnger<span class="pl-pds">'</span></span>);

msnger.PORT <span class="pl-k">=</span> <span class="pl-c1">3000</span>; <span class="pl-c">// optional, it defaults to process.env.PORT</span>
msnger.SERVICE <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>gmail<span class="pl-pds">'</span></span>; <span class="pl-c">// Service name like gmail, mailgun, etc</span>
msnger.USERNAME <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>postman<span class="pl-pds">'</span></span>; <span class="pl-c">// Username of the sender account</span>
msnger.PASS <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>password<span class="pl-pds">'</span></span>; <span class="pl-c">// Password of the sender account</span>
msnger.DESTINATION <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>receiver@xyzmail.com<span class="pl-pds">'</span></span>; <span class="pl-c">// Receiver's email account</span>

msnger.startServer(); <span class="pl-c">// start the messaging server</span></pre></div>
</li>
</ol>

<h2>
<a id="setting-up-the-server" class="anchor" href="#setting-up-the-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting up the server</h2>

<p>The server could be started with the example code above. SERVICE, USERNAME, PASS
and DESTINATION must be provided for the server to run. They could be defined as
above or as environment variables. Set environment variables for all the above
properties and run the server. It would look into the environment variables and
pick up the required properties.</p>

<h2>
<a id="setting-subject-and-body" class="anchor" href="#setting-subject-and-body" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting Subject and Body</h2>

<p>msnger has a default subject and body structure but it might not fit for everyone.
These default could be overridden by redefining them as follows</p>

<div class="highlight highlight-js"><pre><span class="pl-c1">msnger</span>.<span class="pl-en">SUBJECT</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">req</span>) {
  <span class="pl-k">return</span> util.format(<span class="pl-s"><span class="pl-pds">'</span>Important message from %s<span class="pl-pds">'</span></span>, req.<span class="pl-c1">body</span>.<span class="pl-c1">name</span>);
};

<span class="pl-c1">msnger</span>.<span class="pl-en">BODY</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">req</span>) {
  <span class="pl-k">return</span> util.format(<span class="pl-s"><span class="pl-pds">'</span>Message: %s <span class="pl-cce">\n</span>%s<span class="pl-cce">\n</span>%s<span class="pl-pds">'</span></span>, req.<span class="pl-c1">body</span>.<span class="pl-c1">name</span>, req.<span class="pl-c1">body</span>.email);
}</pre></div>

<p>These functions have a request argument which contains the field data passed to
<code>/message</code> in POST request. Both of these functions should return string.</p>

<h2>
<a id="sending-message" class="anchor" href="#sending-message" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sending Message</h2>

<p>To initiate a message, send a POST request to http://host:port/message . 
By default, <code>/message</code> expects <code>name</code>, <code>email</code>, <code>phone</code> and <code>message</code>.</p>

<p>Here is an example of how you would send a POST request using ajax</p>

<div class="highlight highlight-js"><pre>$.ajax({
  url<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>http://host:port/message<span class="pl-pds">"</span></span>,
  type<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>,
  data<span class="pl-k">:</span> {
    name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>aName<span class="pl-pds">'</span></span>,
    phone<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>aPhoneNumber<span class="pl-pds">'</span></span>,
    email<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>anEmailAddress<span class="pl-pds">'</span></span>,
    message<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>aMessage<span class="pl-pds">'</span></span>
  },
  <span class="pl-en">success</span>: <span class="pl-k">function</span>() {
    <span class="pl-c">// Do something when success</span>
  },
  <span class="pl-en">error</span>: <span class="pl-k">function</span>() {
    <span class="pl-c">// Do something else on error</span>
  }
})</pre></div>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>LICENSE</h2>

<p>MIT Â© 2015 Sunny (darkowlzz)</p>
      </section>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-63771901-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
